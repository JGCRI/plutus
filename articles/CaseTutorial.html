<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Case Tutorial • plutus</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Case Tutorial">
<meta property="og:description" content="plutus">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">plutus</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/gcamInvest.html">gcamInvest</a>
    </li>
    <li>
      <a href="../articles/CaseTutorial.html">Case Tutorial</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa-code-branch"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fas fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/JGCRI/plutus/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="CaseTutorial_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Case Tutorial</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JGCRI/plutus/blob/master/vignettes/CaseTutorial.Rmd"><code>vignettes/CaseTutorial.Rmd</code></a></small>
      <div class="hidden name"><code>CaseTutorial.Rmd</code></div>

    </div>

    
    
<!-------------------------->
<!-------------------------->
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<!-------------------------->
<!-------------------------->
<p align="center">
<img src="vignettesFigs/divider.png"></p>
<ol style="list-style-type: decimal">
<li>
<p>Download and install:</p>
<ul>
<li><p>R (<a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a>)</p></li>
<li><p>R studio (<a href="https://www.rstudio.com/" class="uri">https://www.rstudio.com/</a>)</p></li>
</ul>
</li>
<li><p>Open R studio:</p></li>
</ol>
<pre><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages('devtools')
devtools::install_github('JGCRI/rgcam')
devtools::install_github('JGCRI/plutus')</a></code></pre>
<p><br></p>
<!-------------------------->
<!-------------------------->
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<!-------------------------->
<!-------------------------->
<p align="center">
<img src="vignettesFigs/divider.png"></p>
<p>This example will give you a step-by-step instruction on using the core functionality of <code>plutus</code>.</p>
<div id="download-example-dataset" class="section level4">
<h4 class="hasAnchor">
<a href="#download-example-dataset" class="anchor"></a>1. Download example dataset</h4>
<ul>
<li>Download GCAM sample XML database at <a href="http://doi.org/10.5281/zenodo.4641500" class="uri">http://doi.org/10.5281/zenodo.4641500</a>
</li>
<li>Unzip dataset to your desired location. In this example, the path to the dataset is: E:/plutus_example/IDBNexus_gcam5p3_HadGEM2-ES_rcp8p5</li>
</ul>
</div>
<div id="prepare-your-own-input-data-and-assumptions" class="section level4">
<h4 class="hasAnchor">
<a href="#prepare-your-own-input-data-and-assumptions" class="anchor"></a>2. Prepare your own input data and assumptions</h4>
<p>The default data and assumptions used in <code>plutus</code> can be found in GCAM v5.3 (See <a href="#table1">Table 1</a>). However, if any of those files listed in <a href="#table1">Table 1</a> have been updated in your GCAM run, it is necessary to use the updated values in <code>plutus</code> as well. <code>plutus</code> uses argument <code>gcamdataFile</code> to specify the path to ALL of the updated files.</p>
<p><a name="table1"></a> <strong>Table 1:</strong> Data and assumption files. “~\” represents the path to your GCAM v5.3 home folder.</p>
<table class="table">
<colgroup>
<col width="25%">
<col width="25%">
<col width="25%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th>Data or Assumption</th>
<th>Technology</th>
<th>Region</th>
<th>Data File in GCAM v5.3</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Overnight capital costs</td>
<td>Electricity generation technologies</td>
<td>Global</td>
<td>~\input\gcamdata\outputs\L2233.GlobalIntTechCapital_elec.csv <br> ~\input\gcamdata\outputs\L2233.GlobalTechCapital_elecPassthru.csv</td>
</tr>
<tr class="even">
<td>Overnight capital costs</td>
<td>Cooling technologies</td>
<td>Global</td>
<td>~\input\gcamdata\outputs\L2233.GlobalIntTechCapital_elec_cool.csv <br> ~\input\gcamdata\outputs\L2233.GlobalTechCapital_elec_cool.csv</td>
</tr>
<tr class="odd">
<td>Capacity factors</td>
<td>Electricity generation technologies</td>
<td>Global</td>
<td>~\input\gcamdata\outputs\L223.GlobalTechCapFac_elec.csv</td>
</tr>
<tr class="even">
<td>Capacity factors</td>
<td>Intermittant technologies</td>
<td>Global</td>
<td>~\input\gcamdata\outputs\L223.GlobalIntTechCapFac_elec.csv</td>
</tr>
<tr class="odd">
<td>Capacity factors</td>
<td>Intermittant technologies</td>
<td>Regional</td>
<td>~\input\gcamdata\outputs\L223.StubTechCapFactor_elec.csv</td>
</tr>
<tr class="even">
<td>Lifetime and steepness</td>
<td>Electricity generation technologies</td>
<td>Global</td>
<td>~\input\gcamdata\inst\extdata\energy\A23.globaltech_retirement.csv</td>
</tr>
</tbody>
</table>
<p><em>Note</em>: In this example, our GCAM sample dataset is based on the default data and assumptions, so we do not need to update those files in <code>plutus</code>.</p>
</div>
<div id="use-plutusgcaminvest-to-estimate-stranded-assets-and-electricity-investments" class="section level4">
<h4 class="hasAnchor">
<a href="#use-plutusgcaminvest-to-estimate-stranded-assets-and-electricity-investments" class="anchor"></a>3. Use <code>plutus::gcamInvest</code> to estimate stranded assets and electricity investments</h4>
<p>Here are the core arguments we used in this example:</p>
<ul>
<li>
<code>gcamdatabase</code>: FULL path to the GCAM output XML database folder.</li>
<li>
<code>reReadData</code>: If TRUE, <code>plutus</code> will read the GCAM database and create a queryData.proj file under the output directory.</li>
<li>
<code>scenOrigNames</code>: Choose scenarios to read in. Default = ‘All’ will read all the scenarios.</li>
<li>
<code>regionsSelect</code>: Choose regions to read in. Defaul = NULL will read all the regions.</li>
<li>
<code>saveData</code>: If TRUE, <code>plutus</code> will save data by different aggregated classes.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load required packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JGCRI/plutus">plutus</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="co"># Set your working directory based on the example dataset location</span>
<span class="va">workdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="st">'E:/plutus_example/'</span><span class="op">)</span>

<span class="co"># provide path to the desired GCAM database folder.</span>
<span class="va">path_to_gcamdatabase</span> <span class="op">&lt;-</span> <span class="st">'E:/plutus_example/IDBNexus_gcam5p3_HadGEM2-ES_rcp8p5'</span>
<span class="co"># Specify the path to data file folder if any data files has been updated</span>
<span class="co"># path_to_gcamdataFile &lt;- 'E:/plutus_example/gcamdataFile'</span>

<span class="co"># Use plutus::gcamInvest to calculate stranded assets and electricity investments</span>
<span class="va">invest</span> <span class="op">&lt;-</span> <span class="fu">plutus</span><span class="fu">::</span><span class="fu"><a href="../reference/gcamInvest.html">gcamInvest</a></span><span class="op">(</span>gcamdatabase <span class="op">=</span> <span class="va">path_to_gcamdatabase</span>,
                             reReadData <span class="op">=</span> <span class="cn">T</span>,
                             <span class="co"># gcamdataFile = path_to_gcamdataFile, # Use this argument if any data files has been updated</span>
                             scenOrigNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Reference'</span><span class="op">)</span>,
                             regionsSelect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'USA'</span>, <span class="st">'China'</span><span class="op">)</span>,
                             saveData <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<p><br></p>
</div>
<div id="check-outputs" class="section level4">
<h4 class="hasAnchor">
<a href="#check-outputs" class="anchor"></a>4. Check outputs</h4>
<p><code><a href="../reference/gcamInvest.html">plutus::gcamInvest</a></code> returns a list containing:</p>
<ul>
<li>
<code>data</code>: a dataframe with the post-processed GCAM output showing stranded assets and electricity investments (see <a href="#table2">Table 2</a>) by scenario, region, technology, and time period</li>
<li>
<code>dataAggParam</code>: a dataframe with the data aggregated to the parameter</li>
<li>
<code>dataAggClass1</code>: a dataframe with the data aggregated to class 1</li>
<li>
<code>dataAggclass2</code>: a dataframe with the data aggregated to class 2</li>
<li>
<code>scenarios</code>: A list of the scenarios</li>
<li>
<code>queries</code>: A list of the queries used to extract the data</li>
</ul>
<p><code>data</code> contains the most detailed information. Check the structure and content of <code>data</code> and select the most relevant columns including scenario, region, param, class1 (= fuel types), x (= year), units, and value.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get dataframe with post-processed outputs for stranded assets and electricity investment</span>
<span class="va">df_invest</span> <span class="op">&lt;-</span> <span class="va">invest</span><span class="op">$</span><span class="va">data</span>
<span class="co"># Check dataframe structure</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">df_invest</span><span class="op">)</span></code></pre></div>
<pre><code>## tibble[,22] [1,152 × 22] (S3: tbl_df/tbl/data.frame)
##  $ scenario     : chr [1:1152] "Reference" "Reference" "Reference" "Reference" ...
##  $ region       : chr [1:1152] "China" "China" "China" "China" ...
##  $ subRegion    : chr [1:1152] "China" "China" "China" "China" ...
##  $ param        : chr [1:1152] "elecNewCapCost" "elecNewCapCost" "elecNewCapCost" "elecNewCapCost" ...
##  $ sources      : chr [1:1152] "Sources" "Sources" "Sources" "Sources" ...
##  $ class1       : chr [1:1152] "Bioenergy" "Bioenergy" "Bioenergy" "Bioenergy" ...
##  $ class2       : chr [1:1152] "class2" "class2" "class2" "class2" ...
##  $ x            : num [1:1152] 2015 2020 2025 2030 2035 ...
##  $ xLabel       : chr [1:1152] "Year" "Year" "Year" "Year" ...
##  $ vintage      : chr [1:1152] "Vint_2015" "Vint_2020" "Vint_2025" "Vint_2030" ...
##  $ units        : chr [1:1152] "New Elec Cap Cost (Billion 2010 USD)" "New Elec Cap Cost (Billion 2010 USD)" "New Elec Cap Cost (Billion 2010 USD)" "New Elec Cap Cost (Billion 2010 USD)" ...
##  $ aggregate    : chr [1:1152] "sum" "sum" "sum" "sum" ...
##  $ classLabel1  : chr [1:1152] "Fuel" "Fuel" "Fuel" "Fuel" ...
##  $ classPalette1: chr [1:1152] "pal_metis" "pal_metis" "pal_metis" "pal_metis" ...
##  $ classLabel2  : chr [1:1152] "classLabel2" "classLabel2" "classLabel2" "classLabel2" ...
##  $ classPalette2: chr [1:1152] "classPalette2" "classPalette2" "classPalette2" "classPalette2" ...
##  $ origScen     : chr [1:1152] "Reference" "Reference" "Reference" "Reference" ...
##  $ origQuery    : chr [1:1152] "elec gen by gen tech and cooling tech and vintage" "elec gen by gen tech and cooling tech and vintage" "elec gen by gen tech and cooling tech and vintage" "elec gen by gen tech and cooling tech and vintage" ...
##  $ origUnits    : chr [1:1152] "billion 2010 USD" "billion 2010 USD" "billion 2010 USD" "billion 2010 USD" ...
##  $ origX        : num [1:1152] 2015 2020 2025 2030 2035 ...
##  $ value        : num [1:1152] 0 0 5.84 8.75 8.95 ...
##  $ origValue    : num [1:1152] 0 0 5.84 8.75 8.95 ...</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Select key variables</span>
<span class="va">df_invest_sub</span> <span class="op">&lt;-</span> <span class="va">df_invest</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">scenario</span>, <span class="va">region</span>, <span class="va">param</span>, <span class="va">class1</span>, <span class="va">x</span>, <span class="va">units</span>, <span class="va">value</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>fuel <span class="op">=</span> <span class="va">class1</span>,
                year <span class="op">=</span> <span class="va">x</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">df_invest_sub</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##   scenario  region param        fuel      year units                       value
##   &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;                       &lt;dbl&gt;
## 1 Reference China  elecNewCapC… Bioener…  2015 New Elec Cap Cost (Billion…  0   
## 2 Reference China  elecNewCapC… Bioener…  2020 New Elec Cap Cost (Billion…  0   
## 3 Reference China  elecNewCapC… Bioener…  2025 New Elec Cap Cost (Billion…  5.84
## 4 Reference China  elecNewCapC… Bioener…  2030 New Elec Cap Cost (Billion…  8.75
## 5 Reference China  elecNewCapC… Bioener…  2035 New Elec Cap Cost (Billion…  8.95
## 6 Reference China  elecNewCapC… Bioener…  2040 New Elec Cap Cost (Billion…  8.42</code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Check out 8 parameters</span>
<span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">df_invest</span><span class="op">$</span><span class="va">param</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "elecNewCapCost"             "elecNewCapGW"              
## [3] "elecAnnualRetPrematureCost" "elecAnnualRetPrematureGW"  
## [5] "elecCumCapCost"             "elecCumCapGW"              
## [7] "elecCumRetPrematureCost"    "elecCumRetPrematureGW"</code></pre>
<p>There are <strong>eight</strong> different parameters in the output showing stranded assets or electricity investments in terms of monetary value (Billion 2010 USD) or installed capacity (GW). The detailed descriptions are in <a href="#table2">Table 2</a>. GCAM v5.3 is operated in five-years time step with 2015 as the final calibration year (base year). Annual value is the value calculated at each time step. Cumulative value represents the cumulative total over five-year time step.</p>
<p><a name="table2"></a> <strong>Table 2:</strong> Descriptions of output parameters for stranded assets and electricity investments.</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Unit</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>elecNewCapCost</td>
<td>Annual electricity capacity installations</td>
<td>Billion 2010 USD</td>
</tr>
<tr class="even">
<td>elecNewCapGW</td>
<td>Annual electricity capacity installations</td>
<td>Gigawatts</td>
</tr>
<tr class="odd">
<td>elecAnnualRetPrematureCost</td>
<td>Annual premature retirements</td>
<td>Billion 2010 USD</td>
</tr>
<tr class="even">
<td>elecAnnualRetPrematureGW</td>
<td>Annual premature retirements</td>
<td>Gigawatts</td>
</tr>
<tr class="odd">
<td>elecCumCapCost</td>
<td>Cumulative electricity capacity installations</td>
<td>Billion 2010 USD</td>
</tr>
<tr class="even">
<td>elecCumCapGW</td>
<td>Cumulative electricity capacity installations</td>
<td>Gigawatts</td>
</tr>
<tr class="odd">
<td>elecCumRetPrematureCost</td>
<td>Cumulative premature retirements</td>
<td>Billion 2010 USD</td>
</tr>
<tr class="even">
<td>elecCumRetPrematureGW</td>
<td>Cumulative premature retirements</td>
<td>Gigawatts</td>
</tr>
</tbody>
</table>
<p><a href="#installation">Back to Top</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mengqi Zhao, Zarrar Khan, Tom Wild.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
